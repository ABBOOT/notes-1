## 简介

插入数据是向数据库中增加数据的主要方法。一般的语法如下：

```mysql
INSERT INTO table_name ([fields...]) VALUES ([value...]);
```


## 使用

插入数据的方式大概有4种

1. 插入完整的行
2. 插入行的一部分
3. 插入多行数据（批量插入）
4. 插入来自查询的数据

### 插入完整的行

使用`INSERT`将一条数据插入数据库是最简单也是最基本的操作。插入操作有两种写法。

**顺序插入**

顺序插入指的是：给出数据库名和需要插入数据，按照数据库字段排列顺序将数据插入数据库。

```mysql
INSERT INTO `test`.`br_user` VALUES (NULL, '我叫 MT', '123456', '123@xyz.com');
```

这种顺序插入方式，必须和数据库字段一一对应的给出每个值，如果不想给值，可以设为 NULL（在数据格式允许的情况下）。由于位置匹配有要求，所以十分不安全。假设我们需要调增数据库结构时候，此语句插入数据将会发生错误。所以一般情况下我们不采用这种方式。

**字段名+值插入**

```mysql
INSERT INTO `test`.`br_user` (`user_id`, `name`, `password`, `email`) VALUES (NULL, '我叫 MT', '123456', '123@xyz.com');
```

上面这条语句可以实现和顺序插入一样的功能，但它相比于顺序插入多给出了字段名，这种方式稍微复杂点儿，但是更为安全。

在插入数据行时候，MySQL 将会使用 VALUES 的值填入对应字段名，例如“我叫 MT”将会被插入到 name 字段。

因为提供了字段名，所以字段的顺序也不一定需要按照数据库字段排序。比如，上面的语句中将 name 字段调整到最后，并将其对应的值也调整到最后，则插入的数据完全和上面的语句相同。

### 插入多行（批量插入）

MySQL 也支持一次插入多条记录，只需要给出多个 VALUES 使用逗号分隔（使用圆括号括起来），就可以一次插入多条记录。

```mysql
INSERT INTO `test`.`br_user` (`user_id`, `password`, `email`, `name`) 
VALUES (NULL, '123456', '1234@xyz.com', '我叫 MT'),
(NULL, '123456', '456@xyz.com', '我叫 MT2'),
(NULL, '123456', '789@xyz.com', '我叫 MT3'),
(NULL, '123456', '222@xyz.com', '我叫 MT4');
```

建议：在实际开发中，如果需要插入多条数据尽量使用批量插入。因为速度比一条一条插入块，性能更好。

### 插入检索出的数据

也可以将通过某个 SQL 语句查询出来的结果插入到另外的表中。这时候需要考虑查询出来的列和要插入的表的结构是否匹配的问题。

#### 相同表结构

假设一个场景，我们有两张用户表，现在需要将其用户进行合并。首先我们可能会想到，将一张表数据查出，再放入到另外一张表合并。但是有了插入检索出数据这个功能，就不需要这么麻烦了。MySQL 可以一次帮我们处理好。

```mysql
INSERT INTO br_user(`password`, `email`, `name`) SELECT `password`, `email`, `name` FROM br_user2;
```

这条语句看上去好像是两个语句，但是他执行的是一个功能：将 br_user2 表中的的数据挪到了 br_user 表，一次性完成。

这里的插入多少记录到 br_user 表决定于 SELECT 检索出来多少记录，如果一条也没有检索到，也不会报错。当然，也可以在`SELECT`语句后面使用`WHERE`条件筛选数据，`LIMIT`节选数据。

> 提醒：这里复制数据到另外一个表，最好不要使用原来的表 id，防止和需要合并的表冲突，除非你确定不会冲突。还有字段类型，如果检索出来为字符串，而插入的为整型，MySQL 会帮你转换了。

#### 不同表结构

MySQL 并不关心两个表结构是否相同，也不关心检索的字段是否相同，只关心检索出来的字段顺序。简单来说，就是检索出来的第一个字段就会被插入到表的第一个字段，以此类推。

```mysql
INSERT INTO br_user(`password`, `email`, `name`) SELECT `region_py`, `region_type`, `region_name` FROM br_region where region_id < 10;
```

这里`region_py`被放入了`password`；`region_type`被放入了`email`；`region_name`被放入了`name`。


